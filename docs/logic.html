<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>logic.py</title>
  <link rel="stylesheet" href="pycco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div class='section'>
    <div class='docs'><h1>logic.py</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">This class controls all rules and logic for the game.</span>
<span class="sd">ISSUES: Long, lot&#39;s of code reuse. Check metrics on Radon</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="kn">import</span> <span class="nn">upsidedown</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">Button</span><span class="p">,</span> <span class="n">messagebox</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">traceback</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">from</span> <span class="nn">externalfileutil</span> <span class="kn">import</span> <span class="n">playexternalmoves</span> <span class="k">as</span> <span class="n">spem</span><span class="p">,</span> <span class="n">gamerecorder</span><span class="p">,</span> <span class="n">gameTurn</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">ml.move_gen</span> <span class="kn">import</span> <span class="n">moveGeneration</span>
<span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">ml.move_gen</span> <span class="kn">import</span> <span class="n">moveGeneration</span>
<span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Timer</span><span class="p">,</span> <span class="n">Thread</span><span class="p">,</span> <span class="n">Event</span>
<span class="kn">from</span> <span class="nn">ml.generateCSV</span> <span class="kn">import</span> <span class="n">csvUtil</span> <span class="k">as</span> <span class="n">csvUtil</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      <p>This class contains all the user actions including all the rules which allow for legal shogi 
moves and rulesets </p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">class</span> <span class="nc">logic</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">gameState</span><span class="p">,</span>
            <span class="n">cells</span><span class="p">,</span>
            <span class="n">turnIndicator</span><span class="p">,</span>
            <span class="n">dropBlacks</span><span class="p">,</span>
            <span class="n">dropWhites</span><span class="p">,</span>
            <span class="n">dropBlacksPieces</span><span class="p">,</span>
            <span class="n">dropWhitePieces</span><span class="p">,</span>
            <span class="n">CheckIndicator</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span> <span class="o">=</span> <span class="n">gameState</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cells</span> <span class="o">=</span> <span class="n">cells</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">turnIndicator</span> <span class="o">=</span> <span class="n">turnIndicator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacks</span> <span class="o">=</span> <span class="n">dropBlacks</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropWhites</span> <span class="o">=</span> <span class="n">dropWhites</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span> <span class="o">=</span> <span class="n">dropBlacksPieces</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span> <span class="o">=</span> <span class="n">dropWhitePieces</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrix</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrixPre</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CheckIndicator</span> <span class="o">=</span> <span class="n">CheckIndicator</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      <p>Single steps through a loaded game</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">singleStepPlay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isLoad</span> <span class="o">!=</span> <span class="kc">True</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Single Step is not available because load not selected&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Single Step&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameState</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="n">externalfileutil</span> <span class="o">=</span> <span class="n">spem</span><span class="p">()</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">gameTurn</span><span class="p">()</span><span class="o">.</span><span class="n">gameTurn</span> <span class="o">&gt;=</span> <span class="n">externalfileutil</span><span class="o">.</span><span class="n">getLengthOfPlay</span><span class="p">()):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isLoad</span> <span class="o">=</span> <span class="kc">False</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      <p>This is a single step to allow the AI to play a move
By checking the movetoplay file and reading it</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">PlayAIMove</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="s2">&quot;ext_data/movetoplay.txt&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">st_size</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Playing the AI&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isLoad</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isLoad</span> <span class="o">=</span> <span class="kc">False</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      <p>Fullstep: we play every move to fully load a file</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">fullStepPlay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isLoad</span> <span class="o">!=</span> <span class="kc">True</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Full Step is not available because load not selected&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Full Step&#39;</span><span class="p">)</span>
            <span class="n">externalfileutil</span> <span class="o">=</span> <span class="n">spem</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">externalfileutil</span><span class="o">.</span><span class="n">getLengthOfPlay</span><span class="p">()):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="n">externalfileutil</span><span class="o">.</span><span class="n">clearLoadGame</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isLoad</span> <span class="o">=</span> <span class="kc">False</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      <p>Checks if number is even</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">isEven</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-7'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-7'>#</a>
      </div>
      <p>Click is the action user invokes when clicking. Different states can
occur.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">isLoad</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">movesPlayed</span> <span class="o">=</span> <span class="n">gamerecorder</span><span class="p">()</span><span class="o">.</span><span class="n">getGameLength</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isAI</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">playerSelected</span> <span class="o">==</span>
                    <span class="s1">&#39;Black&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">isEven</span><span class="p">(</span><span class="n">movesPlayed</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">actionSquare</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">isLoad</span><span class="p">)</span>
            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">playerSelected</span> <span class="o">==</span> <span class="s1">&#39;White&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">isEven</span><span class="p">(</span><span class="n">movesPlayed</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">actionSquare</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">isLoad</span><span class="p">)</span>
            <span class="k">elif</span><span class="p">(</span><span class="n">isLoad</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">actionSquare</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">isLoad</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;It is not your move yet!&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actionSquare</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">isLoad</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-8'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-8'>#</a>
      </div>
      <p>Drops are handled here</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">dropAction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-9'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-9'>#</a>
      </div>
      <p>Quickly color it red to show which place we want to drop it. 
Debugging purposes only for now.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;RED&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">col</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosX</span> <span class="o">=</span> <span class="n">row</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosY</span> <span class="o">=</span> <span class="n">col</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">((</span><span class="s1">&#39;BLACK&#39;</span><span class="p">,</span>
                       <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">blackcaptured</span><span class="p">),</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">droprank</span><span class="p">,</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">blackcaptured</span><span class="p">))</span>
                <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">blackcaptured</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">droprank</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">((</span><span class="s1">&#39;WHITE&#39;</span><span class="p">,</span>
                       <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">whitecaptured</span><span class="p">),</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">droprank</span><span class="p">,</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">whitecaptured</span><span class="p">))</span>
                <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">whitecaptured</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">droprank</span><span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-10'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-10'>#</a>
      </div>
      <p>Check if drop location is legal for a knight</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">if</span> <span class="s1">&#39;n&#39;</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">row</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                        <span class="n">row</span> <span class="o">&gt;=</span> <span class="mi">7</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Too deep for knight&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span>
                    <span class="n">pos</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">softReset</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">moveLegalDrop</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-11'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-11'>#</a>
      </div>
      <p>Switch turns over when the drop is done</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-12'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-12'>#</a>
      </div>
      <p>Remove the dropped piece from the stack so user cant drop again</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">droprank</span><span class="p">]</span><span class="o">.</span><span class="n">pack_forget</span><span class="p">(</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">droprank</span><span class="p">]</span><span class="o">.</span><span class="n">pack_forget</span><span class="p">(</span>
                        <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">SwitchTurns</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-13'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-13'>#</a>
      </div>
      <p>Check if drop location is legal for lance</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">elif</span> <span class="s1">&#39;l&#39;</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">row</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                        <span class="n">row</span> <span class="o">==</span> <span class="mi">8</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Too deep for lance&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span>
                    <span class="n">pos</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">softReset</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">moveLegalDrop</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-14'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-14'>#</a>
      </div>
      <p>Switch turns over when the drop is done</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-15'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-15'>#</a>
      </div>
      <p>Remove the dropped piece from the stack so user cant drop again</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">droprank</span><span class="p">]</span><span class="o">.</span><span class="n">pack_forget</span><span class="p">(</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">droprank</span><span class="p">]</span><span class="o">.</span><span class="n">pack_forget</span><span class="p">(</span>
                        <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">SwitchTurns</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-16'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-16'>#</a>
      </div>
      <p>This makes sure pawns are legal
no 2 pawn rule</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">elif</span> <span class="s1">&#39;p&#39;</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">row</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                        <span class="n">row</span> <span class="o">==</span> <span class="mi">8</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Too deep for pawn&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">softReset</span><span class="p">()</span>
                    <span class="n">pos</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">colMat</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                        <span class="n">colMat</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">col</span><span class="p">])</span>

                    <span class="nb">print</span><span class="p">(</span><span class="n">colMat</span><span class="p">)</span>
                    <span class="n">pawnTeam</span> <span class="o">=</span> <span class="s1">&#39;p&#39;</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">:</span>
                        <span class="n">pawnTeam</span> <span class="o">=</span> <span class="s1">&#39;B&#39;</span> <span class="o">+</span> <span class="n">pawnTeam</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">pawnTeam</span> <span class="o">=</span> <span class="s1">&#39;W&#39;</span> <span class="o">+</span> <span class="n">pawnTeam</span>

                    <span class="k">if</span> <span class="n">pawnTeam</span> <span class="ow">in</span> <span class="n">colMat</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;There is a pawn on this column&#39;</span><span class="p">)</span>
                        <span class="n">pos</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">softReset</span><span class="p">()</span>

                    <span class="k">else</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-17'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-17'>#</a>
      </div>
      <p>get pos of king</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                        <span class="n">kingTeam</span> <span class="o">=</span> <span class="s1">&#39;k&#39;</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">:</span>
                            <span class="n">kingTeam</span> <span class="o">=</span> <span class="s1">&#39;W&#39;</span> <span class="o">+</span> <span class="n">kingTeam</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">kingTeam</span> <span class="o">=</span> <span class="s1">&#39;B&#39;</span> <span class="o">+</span> <span class="n">kingTeam</span>

                        <span class="bp">self</span><span class="o">.</span><span class="n">moveLegalDrop</span><span class="p">(</span><span class="n">pawnTeam</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-18'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-18'>#</a>
      </div>
      <p>Switch turns over when the drop is done</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-19'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-19'>#</a>
      </div>
      <p>Remove the dropped piece from the stack so user cant drop again</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Removing from Black stack&#39;</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">droprank</span><span class="p">]</span><span class="o">.</span><span class="n">pack_forget</span><span class="p">(</span>
                            <span class="p">)</span>

                        <span class="k">else</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Removing from White stack&#39;</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">droprank</span><span class="p">]</span><span class="o">.</span><span class="n">pack_forget</span><span class="p">(</span>
                            <span class="p">)</span>

                        <span class="bp">self</span><span class="o">.</span><span class="n">SwitchTurns</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-20'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-20'>#</a>
      </div>
      <p>If the piece we want to drop isn&rsquo;t a pawn, lance or knight
There isn&rsquo;t a problem so it doesn&rsquo;t matter.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">elif</span> <span class="s1">&#39;p&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pos</span> <span class="ow">and</span> <span class="s1">&#39;l&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pos</span> <span class="ow">and</span> <span class="s1">&#39;n&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">:</span>
                <span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">:</span>
                    <span class="n">pos</span> <span class="o">=</span> <span class="s1">&#39;B&#39;</span> <span class="o">+</span> <span class="n">pos</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pos</span> <span class="o">=</span> <span class="s1">&#39;W&#39;</span> <span class="o">+</span> <span class="n">pos</span>
                
                <span class="bp">self</span><span class="o">.</span><span class="n">moveLegalDrop</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-21'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-21'>#</a>
      </div>
      <p>Switch turns over when the drop is done</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-22'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-22'>#</a>
      </div>
      <p>Remove the dropped piece from the stack so user cant drop again</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">droprank</span><span class="p">]</span><span class="o">.</span><span class="n">pack_forget</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">droprank</span><span class="p">]</span><span class="o">.</span><span class="n">pack_forget</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SwitchTurns</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A piece is already there. Move illegal.&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-23'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-23'>#</a>
      </div>
      <p>This function handles the interactions when the user clicks
on a square on the board itself</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">actionSquare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">isLoad</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">isAILoad</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span>
        <span class="n">isPromote</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">isDrop</span> <span class="o">=</span> <span class="kc">None</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-24'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-24'>#</a>
      </div>
      <p>If the gamestate is 3 (ready for drop)
We do a drop action</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameState</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dropAction</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-25'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-25'>#</a>
      </div>
      <p>If the game state is 2 (postion to move the piece to)
We store the new positions and set the gamestate to 2 (invoke the normal action)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameState</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosX</span> <span class="o">=</span> <span class="n">row</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosY</span> <span class="o">=</span> <span class="n">col</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameState</span> <span class="o">=</span> <span class="mi">2</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-26'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-26'>#</a>
      </div>
      <p>If the game state is 0, we first check if the AI is on or we need to load</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameState</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-27'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-27'>#</a>
      </div>
      <p>AI parts</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">externalfileutil</span> <span class="o">=</span> <span class="n">spem</span><span class="p">()</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isLoad</span> <span class="ow">and</span> <span class="n">isLoad</span><span class="p">)</span> <span class="ow">or</span> <span class="n">externalfileutil</span><span class="o">.</span><span class="n">isThereAMoveToPlay_ext</span><span class="p">():</span>
                <span class="n">externalfileutil</span><span class="o">.</span><span class="n">updateMoveToPlayIfNotEmpty</span><span class="p">(</span>
                    <span class="n">gameTurn</span><span class="p">()</span><span class="o">.</span><span class="n">gameTurn</span><span class="p">)</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">externalfileutil</span><span class="o">.</span><span class="n">isThereAMoveToPlay_ext</span><span class="p">()):</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Playing from move&#39;</span><span class="p">)</span>

                    <span class="n">moveRead</span> <span class="o">=</span> <span class="n">externalfileutil</span><span class="o">.</span><span class="n">convertTurnToGameMatrixCompatible</span><span class="p">()</span>
                    <span class="n">isPromote</span> <span class="o">=</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
                    <span class="n">isDrop</span> <span class="o">=</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-28'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-28'>#</a>
      </div>
      <p>Load a drop move</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="k">if</span> <span class="n">isDrop</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;IS LOADING A DROP&#39;</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">isDrop</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">moveLegalDrop</span><span class="p">(</span>
                            <span class="n">moveRead</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>

                        <span class="k">if</span> <span class="p">(</span><span class="n">moveRead</span><span class="p">[</span><span class="mi">1</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">):</span>
                            <span class="k">for</span> <span class="n">rank</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span><span class="p">)):</span>
                                <span class="k">if</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span><span class="p">[</span><span class="n">rank</span><span class="p">]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span>
                                        <span class="s1">&#39;text&#39;</span><span class="p">):</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span><span class="p">[</span><span class="n">rank</span><span class="p">]</span><span class="o">.</span><span class="n">pack_forget</span><span class="p">()</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">moveRead</span><span class="p">[</span><span class="mi">1</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">):</span>
                            <span class="k">for</span> <span class="n">rank</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span><span class="p">)):</span>
                                <span class="k">if</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span><span class="p">[</span><span class="n">rank</span><span class="p">]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span>
                                        <span class="s1">&#39;text&#39;</span><span class="p">):</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span><span class="p">[</span><span class="n">rank</span><span class="p">]</span><span class="o">.</span><span class="n">pack_forget</span><span class="p">()</span>

                        <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;ext_data/movetoplay.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

                        <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">softReset</span><span class="p">()</span>

                        <span class="k">return</span>

                    <span class="n">possiblepcs</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="n">possiblepc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPosWhichCanMakeMove</span><span class="p">(</span>
                                    <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                                <span class="k">if</span> <span class="n">possiblepc</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                                    <span class="n">possiblepcs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">possiblepc</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span>

                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">possiblepcs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">pos</span> <span class="o">=</span> <span class="n">possiblepcs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosX</span> <span class="o">=</span> <span class="n">possiblepcs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosY</span> <span class="o">=</span> <span class="n">possiblepcs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosX</span> <span class="o">=</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosY</span> <span class="o">=</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">pieceSelected</span> <span class="o">=</span> <span class="n">pos</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameState</span> <span class="o">=</span> <span class="mi">2</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameState</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPossibleMoves</span><span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosX</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosY</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
                        <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;ext_data/movetoplay.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">possiblepcs</span><span class="p">)):</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">possiblepcs</span><span class="p">[</span><span class="n">c</span><span class="p">])</span>
                            <span class="k">if</span> <span class="n">possiblepcs</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                                <span class="n">pos</span> <span class="o">=</span> <span class="n">possiblepcs</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosX</span> <span class="o">=</span> <span class="n">possiblepcs</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosY</span> <span class="o">=</span> <span class="n">possiblepcs</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosX</span> <span class="o">=</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosY</span> <span class="o">=</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">pieceSelected</span> <span class="o">=</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameState</span> <span class="o">=</span> <span class="mi">2</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameState</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPossibleMoves</span><span class="p">(</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosX</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosY</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
                                <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;ext_data/movetoplay.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

                    <span class="n">dimCollected</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;configure.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
                    <span class="n">dimCollected</span> <span class="o">=</span> <span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                    <span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-29'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-29'>#</a>
      </div>
      <p>This is for feature collection
Moves are pulled to be converted as features</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="k">if</span> <span class="n">dimCollected</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-30'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-30'>#</a>
      </div>
      <p>Convert the pieces into equivalent numbers because training
process only uses numbers</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                        <span class="n">whiteDrops</span><span class="p">,</span> <span class="n">blackDrops</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
                        <span class="k">for</span> <span class="n">dropIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span><span class="p">)):</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span><span class="p">[</span><span class="n">dropIndex</span><span class="p">]</span><span class="o">.</span><span class="n">winfo_manager</span><span class="p">(</span>
                            <span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;pack&#39;</span><span class="p">:</span>
                                <span class="n">blackDrops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span><span class="p">[</span><span class="n">dropIndex</span><span class="p">]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">))</span>

                        <span class="k">for</span> <span class="n">dropIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span><span class="p">)):</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span><span class="p">[</span><span class="n">dropIndex</span><span class="p">]</span><span class="o">.</span><span class="n">winfo_manager</span><span class="p">(</span>
                            <span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;pack&#39;</span><span class="p">:</span>
                                <span class="n">whiteDrops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span><span class="p">[</span><span class="n">dropIndex</span><span class="p">]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">))</span>

                        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">whiteDrops</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">19</span><span class="p">:</span>
                            <span class="n">whiteDrops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
                        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">blackDrops</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">19</span><span class="p">:</span>
                            <span class="n">blackDrops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>

                        <span class="n">rawMatrix</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span> <span class="o">+</span> <span class="n">whiteDrops</span> <span class="o">+</span> <span class="n">blackDrops</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-31'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-31'>#</a>
      </div>
      <p>Store the numerical encoding into gamestate</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">NumericalEncodingGameState</span> <span class="o">=</span> <span class="n">rawMatrix</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ENCODING SET&#39;</span><span class="p">)</span>
                        <span class="n">pc2num</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                        <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;ml/eval_pcs.map&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
                        <span class="n">pc2num</span> <span class="o">=</span> <span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                        <span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                        <span class="n">convMatrix</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">rawMatrix</span><span class="p">:</span>
                            <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">pc2num</span><span class="p">:</span>
                                <span class="k">try</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
                                        <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">:</span>
                                            <span class="n">convMatrix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                                <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="n">l</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>
                                            <span class="k">break</span>
                                        <span class="k">elif</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span>
                                            <span class="n">convMatrix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>
                                            <span class="k">break</span>
                                        <span class="k">elif</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span><span class="p">:</span>
                                            <span class="n">convMatrix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>
                                            <span class="k">break</span>

                                <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
                                        <span class="n">convMatrix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                                        <span class="k">break</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">convMatrix</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">convMatrix</span><span class="p">))</span>
                        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">loadFile</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-32'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-32'>#</a>
      </div>
      <p>When we load a game, we try to generate features and
labels</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">csvObj</span> <span class="o">=</span> <span class="n">csvUtil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">loadFile</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">])</span>
                            <span class="n">csvObj</span><span class="o">.</span><span class="n">createCombinedCSV</span><span class="p">(</span>
                                <span class="n">convMatrix</span><span class="p">,</span> <span class="s1">&#39;training.csv&#39;</span><span class="p">,</span> <span class="n">csvObj</span><span class="o">.</span><span class="n">getOriginalFile</span><span class="p">())</span>
                        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                            <span class="nb">print</span><span class="p">(</span>
                                <span class="s1">&#39;No CSA found, so not generating labels / features&#39;</span><span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;As there are no more moves to load, proceed&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isLoad</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">isLoad</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-33'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-33'>#</a>
      </div>
      <p>Otherwise, just grab the piece we want to make a move</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="k">if</span> <span class="n">pos</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosX</span> <span class="o">=</span> <span class="n">row</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosY</span> <span class="o">=</span> <span class="n">col</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">pieceSelected</span> <span class="o">=</span> <span class="n">pos</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameState</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPossibleMoves</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosX</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosY</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isLoad</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">isLoad</span> <span class="o">=</span> <span class="kc">False</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-34'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-34'>#</a>
      </div>
      <p>FIXME: Potential design bug introduced here?</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="n">isAILoad</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;LOADING AI&#39;</span><span class="p">,</span> <span class="n">moveRead</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosX</span> <span class="o">=</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosY</span> <span class="o">=</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosX</span> <span class="o">=</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosY</span> <span class="o">=</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">pieceSelected</span> <span class="o">=</span> <span class="n">moveRead</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameState</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPossibleMoves</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosX</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosY</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isLoad</span> <span class="o">=</span> <span class="kc">False</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-35'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-35'>#</a>
      </div>
      <p>Make the move by checking it&rsquo;s legality</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosX</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosY</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">pieceSelected</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">moveLegalGO</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">pieceSelected</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosX</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosY</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosX</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosY</span><span class="p">,</span>
                <span class="n">isPromote</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-36'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-36'>#</a>
      </div>
      <p>Resets the games board colors 
TODO: Phase this out as we move from debug </p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">resetBoardGraphics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-37'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-37'>#</a>
      </div>
      <p>Cleans the board, resets the variables and changes the turn around
For the next player to play</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">SwitchTurns</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">softReset</span><span class="p">()</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">turnIndicator</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;White Turn&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">turnIndicator</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Black Turn&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="kc">True</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-38'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-38'>#</a>
      </div>
      <p>Reset gamestate variables </p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">softReset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosX</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosY</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosX</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosY</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">pieceSelected</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameState</span> <span class="o">=</span> <span class="mi">0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-39'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-39'>#</a>
      </div>
      <p>Checks the gamematrix to find the position on the matrix
Which holds a piece</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">getPosFromPiece</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">pos</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]:</span>
                    <span class="k">return</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span>
        <span class="k">return</span> <span class="kc">None</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-40'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-40'>#</a>
      </div>
      <p>Checks the gamematrix to find the piece on a matrix when given a position</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">getPieceFrmPos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[(</span><span class="n">h</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)][(</span><span class="n">w</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-41'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-41'>#</a>
      </div>
      <p>Gets all the possible moves a piece can make</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">getPossibleMoves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">oldMatrixPosX</span><span class="p">,</span> <span class="n">oldMatrixPosY</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="ow">and</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">and</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;movesets.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="ow">in</span> <span class="n">content</span><span class="p">[</span><span class="n">index</span><span class="p">]:</span>
                        <span class="n">movesets</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-42'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-42'>#</a>
      </div>
      <p>Cast movesets to array</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                        <span class="n">possiblemovelayouts</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">movesets</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">possiblemovelayouts</span><span class="p">)):</span>
                            <span class="n">x_dif</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">possiblemovelayouts</span><span class="p">[</span><span class="n">j</span><span class="p">])[</span><span class="mi">0</span><span class="p">])</span>
                            <span class="n">y_dif</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">possiblemovelayouts</span><span class="p">[</span><span class="n">j</span><span class="p">])[</span><span class="mi">1</span><span class="p">])</span>

                            <span class="k">if</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span>
                                <span class="n">x_dif</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">x_dif</span>
                                <span class="n">y_dif</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">y_dif</span>
                            <span class="k">if</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">:</span>
                                <span class="n">x_dif</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">x_dif</span>
                                <span class="n">y_dif</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">y_dif</span>

                            <span class="k">try</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-43'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-43'>#</a>
      </div>
      <p>Apply the movesets to every position to show the possible moves
And add certain rules to make it correct</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                             <span class="n">x_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                             <span class="n">y_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">))[:</span><span class="o">-</span>
                                                                 <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                                    <span class="k">break</span>

                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))[</span>
                                        <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                                    <span class="k">break</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-44'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-44'>#</a>
      </div>
      <p>If the move is possible, we should store it to return</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                             <span class="n">x_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                             <span class="n">y_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">))[:</span><span class="o">-</span>
                                                                 <span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span>
                                        <span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">)</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">possibleMoveMatrix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                        <span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">))</span>

                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))[</span>
                                        <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;W&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span>
                                        <span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">)</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">possibleMoveMatrix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                        <span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">))</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-45'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-45'>#</a>
      </div>
      <p>If we&rsquo;ve hit an opposing piece, we break the loop as we don&rsquo;t need to do anymore 
checking</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                             <span class="n">x_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                             <span class="n">y_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">))[:</span><span class="o">-</span>
                                                                 <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                                    <span class="k">break</span>

                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))[</span>
                                        <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                                    <span class="k">break</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="k">pass</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;It is not your turn yet&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="mi">0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-46'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-46'>#</a>
      </div>
      <p>This function checks if the move is a legal move, and if it is, we play it
TODO: This function can most certainly broken. Its size is broken and it&rsquo;s deviated from it&rsquo;s original goal
Through extension</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">moveLegalGO</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">pos</span><span class="p">,</span>
            <span class="n">oldMatrixPosXlocal</span><span class="p">,</span>
            <span class="n">oldMatrixPosYlocal</span><span class="p">,</span>
            <span class="n">newMatrixPosXlocal</span><span class="p">,</span>
            <span class="n">newMatrixPosYlocal</span><span class="p">,</span>
            <span class="n">isPromote</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-47'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-47'>#</a>
      </div>
      <p>For the game recorder</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">resultPromotion</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">resultCapture</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">resultDrop</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="p">((</span><span class="n">newMatrixPosXlocal</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span><span class="p">)</span>
                <span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">possibleMoveMatrix</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-48'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-48'>#</a>
      </div>
      <p>When recording games&hellip; we check who actually made the move
Done by checking who can do it, THEN seeing if we need to clear
ambiguity</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">possiblepcs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">possiblepc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPosWhichCanMakeMove</span><span class="p">(</span>
                            <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">newMatrixPosXlocal</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">possiblepc</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                            <span class="n">possiblepcs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">possiblepc</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-49'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-49'>#</a>
      </div>
      <p>Get current pre-move position we are moving to</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">old_state_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span>
                <span class="n">newMatrixPosXlocal</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-50'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-50'>#</a>
      </div>
      <p>Promotion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="ow">and</span> <span class="p">(</span>
                    <span class="n">newMatrixPosXlocal</span> <span class="o">&lt;=</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">oldMatrixPosXlocal</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">)):</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="o">==</span> <span class="s1">&#39;p&#39;</span> <span class="ow">and</span> <span class="n">newMatrixPosXlocal</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="o">==</span> <span class="s1">&#39;n&#39;</span> <span class="ow">and</span> <span class="n">newMatrixPosXlocal</span> <span class="o">&lt;=</span>
                                                                     <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="o">==</span> <span class="s1">&#39;l&#39;</span> <span class="ow">and</span> <span class="n">newMatrixPosXlocal</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">isPromote</span><span class="p">):</span>
                    <span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
                    <span class="n">resultPromotion</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">pos</span><span class="p">,</span> <span class="n">resultPromotion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">promotion</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
                        <span class="k">pass</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">and</span> <span class="p">(</span>
                    <span class="n">newMatrixPosXlocal</span> <span class="o">&gt;=</span> <span class="mi">6</span> <span class="ow">or</span> <span class="n">oldMatrixPosXlocal</span> <span class="o">&gt;=</span> <span class="mi">6</span><span class="p">)):</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="o">==</span> <span class="s1">&#39;p&#39;</span> <span class="ow">and</span> <span class="n">newMatrixPosXlocal</span> <span class="o">&gt;=</span> <span class="mi">8</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="o">==</span> <span class="s1">&#39;n&#39;</span> <span class="ow">and</span> <span class="n">newMatrixPosXlocal</span> <span class="o">&gt;=</span>
                                                                     <span class="mi">7</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="o">==</span> <span class="s1">&#39;l&#39;</span> <span class="ow">and</span> <span class="n">newMatrixPosXlocal</span> <span class="o">&gt;=</span> <span class="mi">8</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">isPromote</span><span class="p">):</span>
                    <span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
                    <span class="n">resultPromotion</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">pos</span><span class="p">,</span> <span class="n">resultPromotion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">promotion</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
                        <span class="k">pass</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-51'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-51'>#</a>
      </div>
      <p>Capture</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">newMatrixPosXlocal</span><span class="p">]</span>
                    <span class="p">[</span><span class="n">newMatrixPosYlocal</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s1">&#39;Captured: &#39;</span> <span class="o">+</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">newMatrixPosXlocal</span><span class="p">][</span><span class="n">newMatrixPosYlocal</span><span class="p">])</span>
                <span class="n">cap_piece</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">newMatrixPosXlocal</span><span class="p">][</span><span class="n">newMatrixPosYlocal</span><span class="p">]</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">blackcaptured</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="s1">&#39;B&#39;</span> <span class="o">+</span> <span class="n">cap_piece</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
                    <span class="nb">print</span><span class="p">((</span><span class="s1">&#39;Adding to black: &#39;</span> <span class="o">+</span>
                           <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">blackcaptured</span><span class="p">))))</span>
                    <span class="n">newButton</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacks</span><span class="p">,</span>
                        <span class="n">text</span><span class="o">=</span><span class="s1">&#39;B&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">newMatrixPosXlocal</span><span class="p">][</span><span class="n">newMatrixPosYlocal</span><span class="p">])</span><span class="o">.</span><span class="n">lower</span><span class="p">()[</span>
                            <span class="o">-</span><span class="mi">1</span><span class="p">:],</span>
                        <span class="n">command</span><span class="o">=</span><span class="k">lambda</span> <span class="n">row</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">blackcaptured</span><span class="p">),</span>
                        <span class="n">piece</span><span class="o">=</span><span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">clickDrop</span><span class="p">(</span>
                            <span class="n">row</span><span class="p">,</span>
                            <span class="n">piece</span><span class="p">))</span>
                    <span class="n">newButton</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newButton</span><span class="p">)</span>
                    <span class="n">resultCapture</span> <span class="o">=</span> <span class="kc">True</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">((</span><span class="s1">&#39;Adding to white: &#39;</span> <span class="o">+</span>
                           <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">whitecaptured</span><span class="p">))))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">whitecaptured</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="s1">&#39;W&#39;</span> <span class="o">+</span> <span class="n">cap_piece</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
                    <span class="n">newButton</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">dropWhites</span><span class="p">,</span>
                        <span class="n">text</span><span class="o">=</span><span class="s1">&#39;W&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">newMatrixPosXlocal</span><span class="p">][</span><span class="n">newMatrixPosYlocal</span><span class="p">])</span><span class="o">.</span><span class="n">lower</span><span class="p">()[</span>
                            <span class="o">-</span><span class="mi">1</span><span class="p">:],</span>
                        <span class="n">command</span><span class="o">=</span><span class="k">lambda</span> <span class="n">row</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">whitecaptured</span><span class="p">),</span>
                        <span class="n">piece</span><span class="o">=</span><span class="s1">&#39;W&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">clickDrop</span><span class="p">(</span>
                            <span class="n">row</span><span class="p">,</span>
                            <span class="n">piece</span><span class="p">))</span>
                    <span class="n">newButton</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newButton</span><span class="p">)</span>
                    <span class="n">resultCapture</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameState</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">newMatrixPosXlocal</span><span class="p">][</span><span class="n">newMatrixPosYlocal</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">oldMatrixPosXlocal</span><span class="p">][</span><span class="n">oldMatrixPosYlocal</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">oldMatrixPosXlocal</span><span class="p">,</span> <span class="n">oldMatrixPosYlocal</span><span class="p">)</span>
                       <span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-52'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-52'>#</a>
      </div>
      <p>Check for checks
This method. Is. perfect.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;CHECK??&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-53'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-53'>#</a>
      </div>
      <p>Does our move reveal a check for the other team?</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">isKingUnderCheck</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ILLEGAL MOVE: Reveals check&#39;</span><span class="p">)</span>
                                <span class="k">break</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span><span class="p">:</span>
                        <span class="k">break</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-54'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-54'>#</a>
      </div>
      <p>Does our move give a check?</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">isKingUnderCheck</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-55'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-55'>#</a>
      </div>
      <p>Does our move get us out of a check?</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="nb">print</span><span class="p">(</span>
                    <span class="s1">&#39;Now that the opponents move has been made, lets check if check is still valid&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">isKingUnderCheck</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-56'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-56'>#</a>
      </div>
      <p>reminder: [y axis][x axis]</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">:</span>
                    <span class="n">kingcolor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span>
                        <span class="s1">&#39;Wk&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;background&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">kingcolor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span>
                        <span class="s1">&#39;Bk&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;background&#39;</span><span class="p">)</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">kingcolor</span> <span class="o">==</span> <span class="s1">&#39;cyan&#39;</span><span class="p">):</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Still in check, Restart that move&#39;</span><span class="p">)</span>
                    <span class="n">old_fill</span> <span class="o">=</span> <span class="n">old_state_pos</span>
                    <span class="k">if</span> <span class="n">old_fill</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">old_fill</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

                    <span class="nb">print</span><span class="p">(</span>
                        <span class="s1">&#39;Resetting old position: &#39;</span> <span class="o">+</span>
                        <span class="nb">str</span><span class="p">(</span><span class="n">old_fill</span><span class="p">)</span> <span class="o">+</span>
                        <span class="s1">&#39; as move &#39;</span> <span class="o">+</span>
                        <span class="nb">str</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span> <span class="o">+</span>
                        <span class="s1">&#39; is illegal&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-57'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-57'>#</a>
      </div>
      <p>Load back or direct drop?</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">newMatrixPosXlocal</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                            <span class="n">text</span><span class="o">=</span><span class="n">upsidedown</span><span class="o">.</span><span class="n">convChartoUpsideDown</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">old_fill</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]))</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">oldMatrixPosXlocal</span><span class="p">,</span> <span class="n">oldMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                            <span class="n">text</span><span class="o">=</span><span class="n">upsidedown</span><span class="o">.</span><span class="n">convChartoUpsideDown</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">pos</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">newMatrixPosXlocal</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                            <span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">old_fill</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">oldMatrixPosXlocal</span><span class="p">,</span> <span class="n">oldMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                            <span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">pos</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">newMatrixPosXlocal</span><span class="p">][</span><span class="n">newMatrixPosYlocal</span><span class="p">]</span> <span class="o">=</span> <span class="n">old_state_pos</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">oldMatrixPosXlocal</span><span class="p">][</span><span class="n">oldMatrixPosYlocal</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">softReset</span><span class="p">()</span>

                    <span class="k">return</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;King is out of check, continue play&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-58'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-58'>#</a>
      </div>
      <p>self.CheckIndicator.configure(text=&rsquo;NO CHECK&rsquo;)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-59'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-59'>#</a>
      </div>
      <p>We set the new position we are moving to as the old piece</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">newMatrixPosXlocal</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span><span class="p">)</span>
                           <span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">newMatrixPosXlocal</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                    <span class="n">text</span><span class="o">=</span><span class="n">upsidedown</span><span class="o">.</span><span class="n">convChartoUpsideDown</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]))</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-60'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-60'>#</a>
      </div>
      <p>Reset game
TODO: Check if this a softreset ? Use it here</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosX</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosY</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosX</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosY</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">pieceSelected</span> <span class="o">=</span> <span class="kc">None</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-61'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-61'>#</a>
      </div>
      <p>We record the move</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">possiblepcs</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">possiblepcs</span><span class="p">)):</span>
                <span class="n">gamerecorder</span><span class="p">()</span><span class="o">.</span><span class="n">recordMove</span><span class="p">(</span>
                    <span class="n">pos</span><span class="p">,</span>
                    <span class="n">resultPromotion</span><span class="p">,</span>
                    <span class="n">resultCapture</span><span class="p">,</span>
                    <span class="n">resultDrop</span><span class="p">,</span>
                    <span class="n">newMatrixPosYlocal</span><span class="p">,</span>
                    <span class="n">newMatrixPosXlocal</span><span class="p">,</span>
                    <span class="n">oldMatrixPosYlocal</span><span class="p">,</span>
                    <span class="n">oldMatrixPosXlocal</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">gamerecorder</span><span class="p">()</span><span class="o">.</span><span class="n">recordMove</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">resultPromotion</span><span class="p">,</span> <span class="n">resultCapture</span><span class="p">,</span>
                                           <span class="n">resultDrop</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span><span class="p">,</span> <span class="n">newMatrixPosXlocal</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-62'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-62'>#</a>
      </div>
      <p>Store the current game record</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">recordingFile</span> <span class="o">=</span> <span class="n">gamerecorder</span><span class="p">()</span><span class="o">.</span><span class="n">getFileRecord</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-63'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-63'>#</a>
      </div>
      <p>Switch over sides</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">turnIndicator</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;White Turn&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">turnIndicator</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Black Turn&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;That move is NOT legal!&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">softReset</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">possibleMoveMatrix</span> <span class="o">*=</span> <span class="mi">0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-64'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-64'>#</a>
      </div>
      <p>Now we check if its a checkmate</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-65'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-65'>#</a>
      </div>
      <p>Get all of your available moves</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;JUDGE: Checking if it is a checkmate&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">populateSimulMoveArrays</span><span class="p">(</span>
                        <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]),</span> <span class="kc">True</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrix</span><span class="p">)):</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">simulateMove</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrixPre</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrixPre</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrixPre</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
                        <span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                    <span class="k">break</span>

            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrix</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-66'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-66'>#</a>
      </div>
      <p>Check if we can drop a piece to cover the check</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">:</span>
                    <span class="n">potentialThreatPcsAr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkDistanceThreats</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Wk&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Wk&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;Wb&#39;</span><span class="p">)</span>
                    <span class="n">potentialThreatPcsAr</span> <span class="o">=</span> <span class="n">potentialThreatPcsAr</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkDistanceThreats</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Wk&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Wk&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;Wr&#39;</span><span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">:</span>
                    <span class="n">potentialThreatPcsAr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkDistanceThreats</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Bk&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Bk&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;Bb&#39;</span><span class="p">)</span>
                    <span class="n">potentialThreatPcsAr</span> <span class="o">=</span> <span class="n">potentialThreatPcsAr</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkDistanceThreats</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Bk&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Bk&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;Br&#39;</span><span class="p">)</span>

                <span class="nb">print</span><span class="p">(</span><span class="n">potentialThreatPcsAr</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">potentialThreatPcsAr</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;RESULT: Checkmate! GAMEOVER&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-67'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-67'>#</a>
      </div>
      <p>Alright, so there is a move and only one threat
We can block. Right?</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">dropAvailable</span> <span class="o">=</span> <span class="kc">False</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-68'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-68'>#</a>
      </div>
      <p>Get available drop pcs</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">:</span>
                        <span class="n">dropPcs</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="k">for</span> <span class="n">rank</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span><span class="p">)):</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span><span class="p">[</span><span class="n">rank</span><span class="p">]</span><span class="o">.</span><span class="n">winfo_manager</span><span class="p">(</span>
                            <span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;pack&#39;</span><span class="p">:</span>
                                <span class="n">dropPcs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span><span class="p">[</span><span class="n">rank</span><span class="p">]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">))</span>

                        <span class="nb">print</span><span class="p">(</span><span class="n">dropPcs</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">potentialThreats</span> <span class="ow">in</span> <span class="n">potentialThreatPcsAr</span><span class="p">:</span>
                            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;Wp&#39;</span> <span class="ow">in</span> <span class="n">dropPcs</span><span class="p">):</span>
                                <span class="k">if</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Wk&#39;</span><span class="p">)[</span>
                                        <span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="n">potentialThreats</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No white pawn here!&#39;</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">poissiblePawnDrops</span> <span class="o">=</span> <span class="p">(</span>
                                        <span class="nb">list</span><span class="p">(</span>
                                            <span class="nb">range</span><span class="p">(</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Wk&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span>
                                                <span class="n">potentialThreats</span><span class="p">[</span><span class="mi">2</span><span class="p">])))</span>
                                    <span class="k">for</span> <span class="n">horiz</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">):</span>
                                        <span class="k">for</span> <span class="n">ver</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">):</span>
                                            <span class="k">if</span> <span class="p">(</span>
                                                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">ver</span><span class="p">][</span><span class="n">horiz</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;Wp&#39;</span><span class="p">:</span>
                                                <span class="k">if</span> <span class="n">horiz</span> <span class="ow">in</span> <span class="n">poissiblePawnDrops</span><span class="p">:</span>
                                                    <span class="n">poissiblePawnDrops</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span>
                                                        <span class="n">horiz</span><span class="p">)</span>

                                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">poissiblePawnDrops</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                        <span class="n">filepcs</span> <span class="o">=</span> <span class="p">[]</span>
                                        <span class="k">for</span> <span class="n">ver</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">):</span>
                                            <span class="n">filepcs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">ver</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Wk&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]])</span>
                                        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;Wp&#39;</span> <span class="ow">in</span> <span class="n">filepcs</span><span class="p">):</span>
                                            <span class="nb">print</span><span class="p">(</span>
                                                <span class="s1">&#39;No white pawn can be dropped here&#39;</span><span class="p">)</span>
                                        <span class="k">else</span><span class="p">:</span>
                                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A white pawn can be played&#39;</span><span class="p">)</span>
                                            <span class="n">dropAvailable</span> <span class="o">=</span> <span class="kc">True</span>
                                            <span class="k">break</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A white pawn can be played&#39;</span><span class="p">)</span>
                                        <span class="n">dropAvailable</span> <span class="o">=</span> <span class="kc">True</span>
                                        <span class="k">break</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No white pawns are available&#39;</span><span class="p">)</span>

                            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;Wn&#39;</span> <span class="ow">in</span> <span class="n">dropPcs</span><span class="p">):</span>
                                <span class="k">if</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Wk&#39;</span><span class="p">)[</span>
                                        <span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="n">potentialThreats</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">):</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No white knight here!&#39;</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A white knight can be played&#39;</span><span class="p">)</span>
                                    <span class="n">dropAvailable</span> <span class="o">=</span> <span class="kc">True</span>
                                    <span class="k">break</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No white knights are available&#39;</span><span class="p">)</span>

                            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;Wl&#39;</span> <span class="ow">in</span> <span class="n">dropPcs</span><span class="p">):</span>
                                <span class="k">if</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Wk&#39;</span><span class="p">)[</span>
                                        <span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="n">potentialThreats</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No white lance here!&#39;</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A white lance can be played&#39;</span><span class="p">)</span>
                                    <span class="n">dropAvailable</span> <span class="o">=</span> <span class="kc">True</span>
                                    <span class="k">break</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No white lance are available&#39;</span><span class="p">)</span>

                        <span class="k">if</span> <span class="n">dropAvailable</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Moves available. Continue play.&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;RESULT: Checkmate! GAMEOVER&#39;</span><span class="p">)</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">dropPcs</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="k">for</span> <span class="n">rank</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span><span class="p">)):</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span><span class="p">[</span><span class="n">rank</span><span class="p">]</span><span class="o">.</span><span class="n">winfo_manager</span><span class="p">(</span>
                            <span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;pack&#39;</span><span class="p">:</span>
                                <span class="n">dropPcs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span><span class="p">[</span><span class="n">rank</span><span class="p">]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">))</span>

                        <span class="nb">print</span><span class="p">(</span><span class="n">dropPcs</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">potentialThreats</span> <span class="ow">in</span> <span class="n">potentialThreatPcsAr</span><span class="p">:</span>
                            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;Bp&#39;</span> <span class="ow">in</span> <span class="n">dropPcs</span><span class="p">):</span>
                                <span class="k">if</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Bk&#39;</span><span class="p">)[</span>
                                        <span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="n">potentialThreats</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No black pawn here!&#39;</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">poissiblePawnDrops</span> <span class="o">=</span> <span class="p">(</span>
                                        <span class="nb">list</span><span class="p">(</span>
                                            <span class="nb">range</span><span class="p">(</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Bk&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span>
                                                <span class="n">potentialThreats</span><span class="p">[</span><span class="mi">2</span><span class="p">])))</span>
                                    <span class="k">for</span> <span class="n">horiz</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">):</span>
                                        <span class="k">for</span> <span class="n">ver</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">):</span>
                                            <span class="k">if</span> <span class="p">(</span>
                                                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">ver</span><span class="p">][</span><span class="n">horiz</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;Bp&#39;</span><span class="p">:</span>
                                                <span class="k">if</span> <span class="n">horiz</span> <span class="ow">in</span> <span class="n">poissiblePawnDrops</span><span class="p">:</span>
                                                    <span class="n">poissiblePawnDrops</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span>
                                                        <span class="n">horiz</span><span class="p">)</span>

                                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">poissiblePawnDrops</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                        <span class="n">filepcs</span> <span class="o">=</span> <span class="p">[]</span>
                                        <span class="k">for</span> <span class="n">ver</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">):</span>
                                            <span class="n">filepcs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">ver</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Bk&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]])</span>
                                        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;Bp&#39;</span> <span class="ow">in</span> <span class="n">filepcs</span><span class="p">):</span>
                                            <span class="nb">print</span><span class="p">(</span>
                                                <span class="s1">&#39;No black pawn can be dropped here&#39;</span><span class="p">)</span>
                                        <span class="k">else</span><span class="p">:</span>
                                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A black pawn can be played&#39;</span><span class="p">)</span>
                                            <span class="n">dropAvailable</span> <span class="o">=</span> <span class="kc">True</span>
                                            <span class="k">break</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A black pawn can be played&#39;</span><span class="p">)</span>
                                        <span class="n">dropAvailable</span> <span class="o">=</span> <span class="kc">True</span>
                                        <span class="k">break</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No black pawns are available&#39;</span><span class="p">)</span>

                            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;Bn&#39;</span> <span class="ow">in</span> <span class="n">dropPcs</span><span class="p">):</span>
                                <span class="k">if</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Bk&#39;</span><span class="p">)[</span>
                                        <span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="n">potentialThreats</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">):</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No black knight here!&#39;</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A black knight can be played&#39;</span><span class="p">)</span>
                                    <span class="n">dropAvailable</span> <span class="o">=</span> <span class="kc">True</span>
                                    <span class="k">break</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No black knights are available&#39;</span><span class="p">)</span>

                            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;Bl&#39;</span> <span class="ow">in</span> <span class="n">dropPcs</span><span class="p">):</span>
                                <span class="k">if</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span><span class="s1">&#39;Bk&#39;</span><span class="p">)[</span>
                                        <span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="n">potentialThreats</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No black lance here!&#39;</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A black lance can be played&#39;</span><span class="p">)</span>
                                    <span class="n">dropAvailable</span> <span class="o">=</span> <span class="kc">True</span>
                                    <span class="k">break</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No black lance are available&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-69'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-69'>#</a>
      </div>
      <p>We check if we can drop a piece to block the check</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                        <span class="k">if</span> <span class="n">dropAvailable</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Moves available. Continue play.&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;RESULT: Checkmate! GAMEOVER&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrixPre</span> <span class="o">*=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrix</span> <span class="o">*=</span> <span class="mi">0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-70'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-70'>#</a>
      </div>
      <p>get raw numerical encoding</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">whiteDrops</span><span class="p">,</span> <span class="n">blackDrops</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">dropIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span><span class="p">)):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span><span class="p">[</span><span class="n">dropIndex</span><span class="p">]</span><span class="o">.</span><span class="n">winfo_manager</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;pack&#39;</span><span class="p">:</span>
                <span class="n">blackDrops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span><span class="p">[</span><span class="n">dropIndex</span><span class="p">]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">dropIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span><span class="p">)):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span><span class="p">[</span><span class="n">dropIndex</span><span class="p">]</span><span class="o">.</span><span class="n">winfo_manager</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;pack&#39;</span><span class="p">:</span>
                <span class="n">whiteDrops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span><span class="p">[</span><span class="n">dropIndex</span><span class="p">]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">))</span>

        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">whiteDrops</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">19</span><span class="p">:</span>
            <span class="n">whiteDrops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">blackDrops</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">19</span><span class="p">:</span>
            <span class="n">blackDrops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>

        <span class="n">rawMatrix</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span> <span class="o">+</span> <span class="n">whiteDrops</span> <span class="o">+</span> <span class="n">blackDrops</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-71'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-71'>#</a>
      </div>
      <p>Store it for the AI player</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">NumericalEncodingGameState</span> <span class="o">=</span> <span class="n">rawMatrix</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-72'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-72'>#</a>
      </div>
      <p>Get the character to sub in</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">getTeamCharacter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;B&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;W&#39;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-73'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-73'>#</a>
      </div>
      <p>This function checks which pieces can move to that spot
V useful for interpreting the classic shogi notation</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">getPosWhichCanMakeMove</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">oldMatrixPosX</span><span class="p">,</span>
            <span class="n">oldMatrixPosY</span><span class="p">,</span>
            <span class="n">pos</span><span class="p">,</span>
            <span class="n">newMatrixPosX</span><span class="p">,</span>
            <span class="n">newMatrixPosY</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="ow">and</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">and</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;movesets.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="ow">in</span> <span class="n">content</span><span class="p">[</span><span class="n">index</span><span class="p">]:</span>
                        <span class="n">movesets</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-74'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-74'>#</a>
      </div>
      <p>cast movesets to array</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                        <span class="n">possiblemovelayouts</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">movesets</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">possiblemovelayouts</span><span class="p">)):</span>
                            <span class="n">x_dif</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">possiblemovelayouts</span><span class="p">[</span><span class="n">j</span><span class="p">])[</span><span class="mi">0</span><span class="p">])</span>
                            <span class="n">y_dif</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">possiblemovelayouts</span><span class="p">[</span><span class="n">j</span><span class="p">])[</span><span class="mi">1</span><span class="p">])</span>

                            <span class="k">if</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span>
                                <span class="n">x_dif</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">x_dif</span>
                                <span class="n">y_dif</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">y_dif</span>
                            <span class="k">if</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">:</span>
                                <span class="n">x_dif</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">x_dif</span>
                                <span class="n">y_dif</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">y_dif</span>

                            <span class="k">try</span><span class="p">:</span>
                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                             <span class="n">x_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                             <span class="n">y_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">))[:</span><span class="o">-</span>
                                                                 <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                                    <span class="k">break</span>

                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))[</span>
                                        <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                                    <span class="k">break</span>

                                <span class="k">if</span> <span class="p">((</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">newMatrixPosX</span><span class="p">)</span>
                                        <span class="ow">and</span> <span class="p">(</span><span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">newMatrixPosY</span><span class="p">)):</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span>
                                        <span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
                                    <span class="k">return</span> <span class="n">pos</span>

                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                             <span class="n">x_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                             <span class="n">y_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">))[:</span><span class="o">-</span>
                                                                 <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                                    <span class="k">break</span>

                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))[</span>
                                        <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                                    <span class="k">break</span>

                            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                                <span class="k">pass</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-75'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-75'>#</a>
      </div>
      <p>This checks whether the King is under check</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">isKingUnderCheck</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">oldMatrixPosX</span><span class="p">,</span> <span class="n">oldMatrixPosY</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="ow">and</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">and</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;movesets.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="ow">in</span> <span class="n">content</span><span class="p">[</span><span class="n">index</span><span class="p">]:</span>
                        <span class="n">movesets</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-76'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-76'>#</a>
      </div>
      <p>cast movesets to array</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                        <span class="n">possiblemovelayouts</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">movesets</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">possiblemovelayouts</span><span class="p">)):</span>
                            <span class="n">x_dif</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">possiblemovelayouts</span><span class="p">[</span><span class="n">j</span><span class="p">])[</span><span class="mi">0</span><span class="p">])</span>
                            <span class="n">y_dif</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">possiblemovelayouts</span><span class="p">[</span><span class="n">j</span><span class="p">])[</span><span class="mi">1</span><span class="p">])</span>

                            <span class="k">if</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span>
                                <span class="n">x_dif</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">x_dif</span>
                                <span class="n">y_dif</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">y_dif</span>
                            <span class="k">if</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">:</span>
                                <span class="n">x_dif</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">x_dif</span>
                                <span class="n">y_dif</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">y_dif</span>

                            <span class="k">try</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                                 <span class="n">x_dif</span> <span class="o">+</span>
                                                                 <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                                 <span class="n">y_dif</span> <span class="o">+</span>
                                                                 <span class="mi">1</span><span class="p">))[:</span><span class="o">-</span>
                                                                     <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                                        <span class="k">break</span>

                                    <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))[</span>
                                            <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                                        <span class="k">break</span>

                                    <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                                 <span class="n">x_dif</span> <span class="o">+</span>
                                                                 <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                                 <span class="n">y_dif</span> <span class="o">+</span>
                                                                 <span class="mi">1</span><span class="p">))[:</span><span class="o">-</span>
                                                                     <span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                                        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span>
                                                <span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                                                <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;Wk&#39;</span><span class="p">:</span>
                                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;BLACK CHECK!&#39;</span><span class="p">)</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span> <span class="o">=</span> <span class="kc">True</span>

                                        <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span>
                                            <span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;cyan&#39;</span><span class="p">)</span>

                                    <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))[</span>
                                            <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;W&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                                        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span>
                                                <span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                                                <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;Bk&#39;</span><span class="p">:</span>
                                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;WHITE CHECK!&#39;</span><span class="p">)</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span> <span class="o">=</span> <span class="kc">True</span>

                                        <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span>
                                            <span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;cyan&#39;</span><span class="p">)</span>

                                    <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                                 <span class="n">x_dif</span> <span class="o">+</span>
                                                                 <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                                 <span class="n">y_dif</span> <span class="o">+</span>
                                                                 <span class="mi">1</span><span class="p">))[:</span><span class="o">-</span>
                                                                     <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                                        <span class="k">break</span>

                                    <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))[</span>
                                            <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                                        <span class="k">break</span>

                            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-77'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-77'>#</a>
      </div>
      <p>print(e)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                                <span class="k">pass</span>

            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-78'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-78'>#</a>
      </div>
      <p>This checks whether the King has been checked by a piece far from it</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">checkDistanceThreats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">oldMatrixPosX</span><span class="p">,</span> <span class="n">oldMatrixPosY</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="n">potentialThreatPcsArr</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="ow">and</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">and</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;movesets.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>

                <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="ow">in</span> <span class="n">content</span><span class="p">[</span><span class="n">index</span><span class="p">]:</span>
                        <span class="n">movesets</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-79'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-79'>#</a>
      </div>
      <p>cast movesets to array</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                        <span class="n">possiblemovelayouts</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">movesets</span><span class="p">)</span>

                        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">possiblemovelayouts</span><span class="p">)):</span>
                            <span class="n">x_dif</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">possiblemovelayouts</span><span class="p">[</span><span class="n">j</span><span class="p">])[</span><span class="mi">0</span><span class="p">])</span>
                            <span class="n">y_dif</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">possiblemovelayouts</span><span class="p">[</span><span class="n">j</span><span class="p">])[</span><span class="mi">1</span><span class="p">])</span>

                            <span class="k">if</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span>
                                <span class="n">x_dif</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">x_dif</span>
                                <span class="n">y_dif</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">y_dif</span>
                            <span class="k">if</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">:</span>
                                <span class="n">x_dif</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">x_dif</span>
                                <span class="n">y_dif</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">y_dif</span>

                            <span class="k">try</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-80'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-80'>#</a>
      </div>
      <p>If the piece is Black and youre black, stop</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                             <span class="n">x_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                             <span class="n">y_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">))[:</span><span class="o">-</span>
                                                                 <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                                    <span class="k">break</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-81'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-81'>#</a>
      </div>
      <p>If the piece is White and youre White, stop</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))[</span>
                                        <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                                    <span class="k">break</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-82'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-82'>#</a>
      </div>
      <p>If the piece is White and youre Black, you
can capture so color</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                             <span class="n">x_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                             <span class="n">y_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">))[:</span><span class="o">-</span>
                                                                 <span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span>
                                            <span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">)]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;background&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;blue&#39;</span><span class="p">):</span>
                                        <span class="k">pass</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span>
                                            <span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
                                        <span class="n">pc</span> <span class="o">=</span> <span class="p">(</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">][</span><span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">])</span>

                                        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;r&#39;</span> <span class="o">==</span> <span class="n">pc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;R&#39;</span> <span class="o">==</span> <span class="n">pc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                                                               <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span> <span class="o">==</span> <span class="n">pc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span> <span class="o">==</span> <span class="n">pc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
                                            <span class="n">potentialThreatPcsArr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                                <span class="nb">str</span><span class="p">(</span><span class="n">pc</span><span class="p">))</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-83'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-83'>#</a>
      </div>
      <p>If the piece is Black and youre White, you
can capture so color</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))[</span>
                                        <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;W&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">)]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;background&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;pink&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">True</span> <span class="ow">and</span> <span class="s1">&#39;k&#39;</span> <span class="ow">in</span> <span class="n">pos</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">)]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;background&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;pink&#39;</span><span class="p">):</span>
                                        <span class="k">pass</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span>
                                            <span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
                                        <span class="n">pc</span> <span class="o">=</span> <span class="p">(</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">][</span><span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">])</span>

                                        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;r&#39;</span> <span class="o">==</span> <span class="n">pc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;R&#39;</span> <span class="o">==</span> <span class="n">pc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                                                               <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span> <span class="o">==</span> <span class="n">pc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span> <span class="o">==</span> <span class="n">pc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
                                            <span class="n">potentialThreatPcsArr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                                <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">pc</span><span class="p">),</span> <span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">])</span>

                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                             <span class="n">x_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                             <span class="n">y_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">))[:</span><span class="o">-</span>
                                                                 <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                                                                                                        <span class="n">x_dif</span> <span class="o">+</span>
                                                                                                                                        <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                                                                                                        <span class="n">y_dif</span> <span class="o">+</span>
                                                                                                                                        <span class="mi">1</span><span class="p">))[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">!=</span> <span class="s1">&#39;k&#39;</span><span class="p">)):</span>
                                    <span class="k">break</span>

                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                             <span class="n">x_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                             <span class="n">y_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">))[:</span><span class="o">-</span>
                                                                 <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                                                                                                                 <span class="n">x_dif</span> <span class="o">+</span>
                                                                                                                                                 <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                                                                                                                 <span class="n">y_dif</span> <span class="o">+</span>
                                                                                                                                                 <span class="mi">1</span><span class="p">))[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">!=</span> <span class="s1">&#39;k&#39;</span><span class="p">)):</span>
                                    <span class="k">break</span>

                            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                                <span class="k">pass</span>
            <span class="k">return</span> <span class="n">potentialThreatPcsArr</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-84'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-84'>#</a>
      </div>
      <p>Handles promotion mechanics by letting the user select if they want to promote</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">promotion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isLoad</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;g&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pos</span> <span class="ow">and</span> <span class="s1">&#39;k&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pos</span> <span class="ow">and</span> <span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">islower</span><span class="p">():</span>
                <span class="n">MsgBox</span> <span class="o">=</span> <span class="n">messagebox</span><span class="o">.</span><span class="n">askquestion</span><span class="p">(</span>
                    <span class="s2">&quot;Promotion!&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;You have reached promotion. Would you like to promote your piece?&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">MsgBox</span> <span class="o">==</span> <span class="s1">&#39;yes&#39;</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">pos</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">pos</span><span class="p">,</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="n">pos</span><span class="p">,</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-85'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-85'>#</a>
      </div>
      <p>If we are loading a promotion move, we don&rsquo;t really give a choice</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;ext_data/movetoplay.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-86'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-86'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">clickDrop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">piece</span><span class="p">):</span>

        <span class="nb">print</span><span class="p">((</span><span class="s1">&#39;DROPPING: &#39;</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">piece</span><span class="p">))</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;configure.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">configContent</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="n">dropSetting</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">configContent</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">dropSetting</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>

            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="ow">and</span> <span class="s1">&#39;B&#39;</span> <span class="ow">in</span> <span class="n">piece</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">and</span> <span class="s1">&#39;W&#39;</span> <span class="ow">in</span> <span class="n">piece</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">droprank</span> <span class="o">=</span> <span class="n">row</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameState</span> <span class="o">=</span> <span class="mi">3</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You can not drop your opponents pieces&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameState</span> <span class="o">=</span> <span class="mi">0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-87'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-87'>#</a>
      </div>
      <p>Same as move legal, but it is tuned for drops</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">moveLegalDrop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">newMatrixPosXlocal</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-88'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-88'>#</a>
      </div>
      <p>Get current pre-move position we are moving to</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">old_state_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span>
            <span class="n">newMatrixPosXlocal</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">old_state_pos</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-89'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-89'>#</a>
      </div>
      <p>For the game recorder</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">resultPromotion</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">resultCapture</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">resultDrop</span> <span class="o">=</span> <span class="kc">True</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-90'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-90'>#</a>
      </div>
      <p>No Capturing or Promotion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameState</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">newMatrixPosXlocal</span><span class="p">][</span><span class="n">newMatrixPosYlocal</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-91'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-91'>#</a>
      </div>
      <p>Check for checks
This method. Is. perfect.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-92'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-92'>#</a>
      </div>
      <p>Does our move reveal a check for the other team?</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">isKingUnderCheck</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ILLEGAL MOVE: Reveals check&#39;</span><span class="p">)</span>
                            <span class="k">break</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-93'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-93'>#</a>
      </div>
      <p>Does our move give a check?</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">isKingUnderCheck</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-94'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-94'>#</a>
      </div>
      <p>Does our move get us out of a check?</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="nb">print</span><span class="p">(</span>
                <span class="s1">&#39;Now that the opponents move has been made, lets check if check is still valid&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">isKingUnderCheck</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-95'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-95'>#</a>
      </div>
      <p>reminder: [y axis][x axis]</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">:</span>
                <span class="n">kingcolor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span>
                    <span class="s1">&#39;Wk&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;background&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">kingcolor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span>
                    <span class="s1">&#39;Bk&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;background&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">kingcolor</span> <span class="o">==</span> <span class="s1">&#39;cyan&#39;</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Still in check, Restart that move&#39;</span><span class="p">)</span>
                <span class="n">old_fill</span> <span class="o">=</span> <span class="n">old_state_pos</span>
                <span class="k">if</span> <span class="n">old_fill</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">old_fill</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

                <span class="nb">print</span><span class="p">(</span>
                    <span class="s1">&#39;Resetting old position: &#39;</span> <span class="o">+</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">old_fill</span><span class="p">)</span> <span class="o">+</span>
                    <span class="s1">&#39; as move &#39;</span> <span class="o">+</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span> <span class="o">+</span>
                    <span class="s1">&#39; is illegal&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-96'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-96'>#</a>
      </div>
      <p>Load back or direct drop?</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">newMatrixPosXlocal</span><span class="p">,</span>
                                <span class="n">newMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">newMatrixPosXlocal</span><span class="p">,</span>
                                <span class="n">newMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-97'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-97'>#</a>
      </div>
      <p>Reset </p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">newMatrixPosXlocal</span><span class="p">][</span><span class="n">newMatrixPosYlocal</span><span class="p">]</span> <span class="o">=</span> <span class="n">old_state_pos</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">softReset</span><span class="p">()</span>

                <span class="k">return</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;King is out of check, continue play&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-98'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-98'>#</a>
      </div>
      <p>self.CheckIndicator.configure(text=&rsquo;NO CHECK&rsquo;)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">newMatrixPosXlocal</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span><span class="p">)</span>
                       <span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">newMatrixPosXlocal</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                <span class="n">text</span><span class="o">=</span><span class="n">upsidedown</span><span class="o">.</span><span class="n">convChartoUpsideDown</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">softReset</span><span class="p">()</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">turnIndicator</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;White Turn&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">turnIndicator</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Black Turn&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="kc">True</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-99'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-99'>#</a>
      </div>
      <p>Record move</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">gamerecorder</span><span class="p">()</span><span class="o">.</span><span class="n">recordMove</span><span class="p">(</span>
            <span class="n">pos</span><span class="p">,</span>
            <span class="n">resultPromotion</span><span class="p">,</span>
            <span class="n">resultCapture</span><span class="p">,</span>
            <span class="n">resultDrop</span><span class="p">,</span>
            <span class="n">newMatrixPosYlocal</span><span class="p">,</span>
            <span class="n">newMatrixPosXlocal</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">possibleMoveMatrix</span> <span class="o">*=</span> <span class="mi">0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-100'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-100'>#</a>
      </div>
      <p>Now we check if its a checkmate</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-101'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-101'>#</a>
      </div>
      <p>Get all of your available moves</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">resetMatrix</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">populateSimulMoveArrays</span><span class="p">(</span>
                        <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]),</span> <span class="kc">True</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrix</span><span class="p">)):</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">simulateMove</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrixPre</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrixPre</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrixPre</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
                        <span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                    <span class="k">break</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrix</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                    <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;p&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">):</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Checkmate!&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You can not check mate by dropping a pawn&#39;</span><span class="p">)</span>
                        <span class="n">old_fill</span> <span class="o">=</span> <span class="n">old_state_pos</span>
                        <span class="k">if</span> <span class="n">old_fill</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">old_fill</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

                        <span class="nb">print</span><span class="p">(</span>
                            <span class="s1">&#39;Resetting old position: &#39;</span> <span class="o">+</span>
                            <span class="nb">str</span><span class="p">(</span><span class="n">old_fill</span><span class="p">)</span> <span class="o">+</span>
                            <span class="s1">&#39; as move &#39;</span> <span class="o">+</span>
                            <span class="nb">str</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span> <span class="o">+</span>
                            <span class="s1">&#39; is illegal&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-102'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-102'>#</a>
      </div>
      <p>Load back or direct drop?</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">newMatrixPosXlocal</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                                <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">newMatrixPosXlocal</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                                <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-103'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-103'>#</a>
      </div>
      <p>self.cells[(newMatrixPosXlocal, newMatrixPosYlocal)].configure(text=upsidedown.convChartoUpsideDown(pos[-1:]))</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">newMatrixPosXlocal</span><span class="p">][</span><span class="n">newMatrixPosYlocal</span><span class="p">]</span> <span class="o">=</span> <span class="n">old_state_pos</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span>

                        <span class="bp">self</span><span class="o">.</span><span class="n">softReset</span><span class="p">()</span>

                        <span class="k">return</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrixPre</span> <span class="o">*=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrix</span> <span class="o">*=</span> <span class="mi">0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-104'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-104'>#</a>
      </div>
      <p>When checking if we can escape a check, we should simulate all the possible moves
This function handles that and checks if a check is escapable</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">populateSimulMoveArrays</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">oldMatrixPosX</span><span class="p">,</span> <span class="n">oldMatrixPosY</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">Turn</span><span class="p">):</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="ow">and</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">and</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;movesets.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>

                <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="ow">in</span> <span class="n">content</span><span class="p">[</span><span class="n">index</span><span class="p">]:</span>
                        <span class="n">movesets</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-105'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-105'>#</a>
      </div>
      <p>cast movesets to array</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                        <span class="n">possiblemovelayouts</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">movesets</span><span class="p">)</span>

                        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">possiblemovelayouts</span><span class="p">)):</span>
                            <span class="n">x_dif</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">possiblemovelayouts</span><span class="p">[</span><span class="n">j</span><span class="p">])[</span><span class="mi">0</span><span class="p">])</span>
                            <span class="n">y_dif</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">possiblemovelayouts</span><span class="p">[</span><span class="n">j</span><span class="p">])[</span><span class="mi">1</span><span class="p">])</span>

                            <span class="k">if</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span>
                                <span class="n">x_dif</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">x_dif</span>
                                <span class="n">y_dif</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">y_dif</span>
                            <span class="k">if</span> <span class="n">pos</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">:</span>
                                <span class="n">x_dif</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">x_dif</span>
                                <span class="n">y_dif</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">y_dif</span>

                            <span class="k">try</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-106'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-106'>#</a>
      </div>
      <p>If the piece is Black and youre black, stop</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                             <span class="n">x_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                             <span class="n">y_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">))[:</span><span class="o">-</span>
                                                                 <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                                    <span class="k">break</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-107'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-107'>#</a>
      </div>
      <p>If the piece is White and youre White, stop</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))[</span>
                                        <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                                    <span class="k">break</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-108'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-108'>#</a>
      </div>
      <p>If the piece is White and youre Black, you
can capture so color</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                             <span class="n">x_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                             <span class="n">y_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">))[:</span><span class="o">-</span>
                                                                 <span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="n">Turn</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span>
                                            <span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">)]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;background&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;blue&#39;</span><span class="p">):</span>
                                        <span class="k">pass</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span>
                                            <span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;pink&#39;</span><span class="p">)</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrixPre</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                            <span class="p">(</span><span class="n">oldMatrixPosX</span><span class="p">,</span> <span class="n">oldMatrixPosY</span><span class="p">,</span> <span class="n">pos</span><span class="p">))</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                            <span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">,</span> <span class="n">pos</span><span class="p">))</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-109'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-109'>#</a>
      </div>
      <p>If the piece is Black and youre White, you
can capture so color</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))[</span>
                                        <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;W&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="n">Turn</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">)]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;background&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;pink&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                                            <span class="n">Turn</span> <span class="o">==</span> <span class="kc">True</span> <span class="ow">and</span> <span class="s1">&#39;k&#39;</span> <span class="ow">in</span> <span class="n">pos</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">)]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;background&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;pink&#39;</span><span class="p">):</span>
                                        <span class="k">pass</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span>
                                            <span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrixPre</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                            <span class="p">(</span><span class="n">oldMatrixPosX</span><span class="p">,</span> <span class="n">oldMatrixPosY</span><span class="p">,</span> <span class="n">pos</span><span class="p">))</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                            <span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span> <span class="n">x_dif</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span> <span class="n">y_dif</span><span class="p">,</span> <span class="n">pos</span><span class="p">))</span>

                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                             <span class="n">x_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                             <span class="n">y_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">))[:</span><span class="o">-</span>
                                                                 <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                                                                                                        <span class="n">x_dif</span> <span class="o">+</span>
                                                                                                                                        <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                                                                                                        <span class="n">y_dif</span> <span class="o">+</span>
                                                                                                                                        <span class="mi">1</span><span class="p">))[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">!=</span> <span class="s1">&#39;k&#39;</span><span class="p">)):</span>
                                    <span class="k">break</span>

                                <span class="k">if</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                             <span class="n">x_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                             <span class="n">y_dif</span> <span class="o">+</span>
                                                             <span class="mi">1</span><span class="p">))[:</span><span class="o">-</span>
                                                                 <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">oldMatrixPosX</span> <span class="o">+</span>
                                                                                                                                                 <span class="n">x_dif</span> <span class="o">+</span>
                                                                                                                                                 <span class="mi">1</span><span class="p">,</span> <span class="n">oldMatrixPosY</span> <span class="o">+</span>
                                                                                                                                                 <span class="n">y_dif</span> <span class="o">+</span>
                                                                                                                                                 <span class="mi">1</span><span class="p">))[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">!=</span> <span class="s1">&#39;k&#39;</span><span class="p">)):</span>
                                    <span class="k">break</span>

                            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                                <span class="k">pass</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-110'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-110'>#</a>
      </div>
      <p>Now we check if we have any drops. We only take the 8 squares
surrounding the king as those are the ones that matter anyways.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-111'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-111'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">simulateMove</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">oldMatrixPosXlocal</span><span class="p">,</span>
            <span class="n">oldMatrixPosYlocal</span><span class="p">,</span>
            <span class="n">pos</span><span class="p">,</span>
            <span class="n">newMatrixPosXlocal</span><span class="p">,</span>
            <span class="n">newMatrixPosYlocal</span><span class="p">,</span>
            <span class="n">iteration</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-112'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-112'>#</a>
      </div>
      <p>Get current pre-move position we are moving to</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">old_state_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span>
            <span class="n">newMatrixPosXlocal</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">newMatrixPosXlocal</span><span class="p">][</span><span class="n">newMatrixPosYlocal</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">oldMatrixPosXlocal</span><span class="p">][</span><span class="n">oldMatrixPosYlocal</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">oldMatrixPosXlocal</span><span class="p">,</span> <span class="n">oldMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-113'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-113'>#</a>
      </div>
      <p>Check for checks
This method. Is. perfect.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-114'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-114'>#</a>
      </div>
      <p>Does our move reveal a check for the other team?</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">isKingUnderCheck</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ILLEGAL MOVE: Reveals check&#39;</span><span class="p">)</span>
                            <span class="k">break</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-115'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-115'>#</a>
      </div>
      <p>Does our move give a check?</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">isKingUnderCheck</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-116'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-116'>#</a>
      </div>
      <p>Does our move get us out of a check?</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="nb">print</span><span class="p">(</span>
                <span class="s1">&#39;Now that the opponents move has been made, lets check if check is still valid&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPieceFrmPos</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">isKingUnderCheck</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-117'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-117'>#</a>
      </div>
      <p>reminder: [y axis][x axis]</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">:</span>
                <span class="n">kingcolor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span>
                    <span class="s1">&#39;Wk&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;background&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">kingcolor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">getPosFromPiece</span><span class="p">(</span>
                    <span class="s1">&#39;Bk&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s1">&#39;background&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">kingcolor</span> <span class="o">==</span> <span class="s1">&#39;cyan&#39;</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Still in check, Restart that move&#39;</span><span class="p">)</span>
                <span class="n">old_fill</span> <span class="o">=</span> <span class="n">old_state_pos</span>
                <span class="k">if</span> <span class="n">old_fill</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">old_fill</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

                <span class="nb">print</span><span class="p">(</span>
                    <span class="s1">&#39;Resetting old position: &#39;</span> <span class="o">+</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">old_fill</span><span class="p">)</span> <span class="o">+</span>
                    <span class="s1">&#39; as move &#39;</span> <span class="o">+</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span> <span class="o">+</span>
                    <span class="s1">&#39; is illegal&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-118'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-118'>#</a>
      </div>
      <p>Load back or direct drop?</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">board_size</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">newMatrixPosXlocal</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                        <span class="n">text</span><span class="o">=</span><span class="n">upsidedown</span><span class="o">.</span><span class="n">convChartoUpsideDown</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">old_fill</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">oldMatrixPosXlocal</span><span class="p">,</span> <span class="n">oldMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                        <span class="n">text</span><span class="o">=</span><span class="n">upsidedown</span><span class="o">.</span><span class="n">convChartoUpsideDown</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">pos</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">newMatrixPosXlocal</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                        <span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">old_fill</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">oldMatrixPosXlocal</span><span class="p">,</span> <span class="n">oldMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                        <span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">pos</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">newMatrixPosXlocal</span><span class="p">][</span><span class="n">newMatrixPosYlocal</span><span class="p">]</span> <span class="o">=</span> <span class="n">old_state_pos</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">oldMatrixPosXlocal</span><span class="p">][</span><span class="n">oldMatrixPosYlocal</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">softReset</span><span class="p">()</span>

                <span class="k">return</span> <span class="kc">True</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">old_fill</span> <span class="o">=</span> <span class="n">old_state_pos</span>
                <span class="k">if</span> <span class="n">old_fill</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">old_fill</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">newMatrixPosXlocal</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                        <span class="n">text</span><span class="o">=</span><span class="n">upsidedown</span><span class="o">.</span><span class="n">convChartoUpsideDown</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">old_fill</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">oldMatrixPosXlocal</span><span class="p">,</span> <span class="n">oldMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                        <span class="n">text</span><span class="o">=</span><span class="n">upsidedown</span><span class="o">.</span><span class="n">convChartoUpsideDown</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">pos</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">newMatrixPosXlocal</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                        <span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">old_fill</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">oldMatrixPosXlocal</span><span class="p">,</span> <span class="n">oldMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                        <span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">pos</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">newMatrixPosXlocal</span><span class="p">][</span><span class="n">newMatrixPosYlocal</span><span class="p">]</span> <span class="o">=</span> <span class="n">old_state_pos</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">[</span><span class="n">oldMatrixPosXlocal</span><span class="p">][</span><span class="n">oldMatrixPosYlocal</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">softReset</span><span class="p">()</span>

                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;King is out of check, continue play&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-119'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-119'>#</a>
      </div>
      <p>self.CheckIndicator.configure(text=&rsquo;NO CHECK&rsquo;)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isCheck</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">newMatrixPosXlocal</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span><span class="p">)</span>
                       <span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cells</span><span class="p">[(</span><span class="n">newMatrixPosXlocal</span><span class="p">,</span> <span class="n">newMatrixPosYlocal</span><span class="p">)]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                <span class="n">text</span><span class="o">=</span><span class="n">upsidedown</span><span class="o">.</span><span class="n">convChartoUpsideDown</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]))</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-120'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-120'>#</a>
      </div>
      <p>Reset</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">resetBoardGraphics</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosX</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">newMatrixPosY</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosX</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">oldMatrixPosY</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">pieceSelected</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">turnIndicator</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;White Turn&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">turnIndicator</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Black Turn&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">isBlackTurn</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">possibleMoveMatrix</span> <span class="o">*=</span> <span class="mi">0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-121'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-121'>#</a>
      </div>
      <p>This file is an abstraction of the AI agent
It passes game data to the model, which returns the move to play</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">class</span> <span class="nc">AI_watcher</span><span class="p">(</span><span class="n">Thread</span><span class="p">,</span> <span class="n">spem</span><span class="p">,</span> <span class="n">logic</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-122'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-122'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">event</span><span class="p">,</span>
            <span class="n">gameState</span><span class="p">,</span>
            <span class="n">cells</span><span class="p">,</span>
            <span class="n">turnIndicator</span><span class="p">,</span>
            <span class="n">dropBlacks</span><span class="p">,</span>
            <span class="n">dropWhites</span><span class="p">,</span>
            <span class="n">dropBlacksPieces</span><span class="p">,</span>
            <span class="n">dropWhitePieces</span><span class="p">,</span>
            <span class="n">CheckIndicator</span><span class="p">):</span>
        <span class="n">Thread</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stopped</span> <span class="o">=</span> <span class="n">event</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span> <span class="o">=</span> <span class="n">gameState</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cells</span> <span class="o">=</span> <span class="n">cells</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">turnIndicator</span> <span class="o">=</span> <span class="n">turnIndicator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacks</span> <span class="o">=</span> <span class="n">dropBlacks</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropWhites</span> <span class="o">=</span> <span class="n">dropWhites</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropBlacksPieces</span> <span class="o">=</span> <span class="n">dropBlacksPieces</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropWhitePieces</span> <span class="o">=</span> <span class="n">dropWhitePieces</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrix</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulMoveMatrixPre</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CheckIndicator</span> <span class="o">=</span> <span class="n">CheckIndicator</span>

        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;ext_data/load_game.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r+&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;ext_data/movetoplay.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r+&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-123'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-123'>#</a>
      </div>
      <p>IsEven function checks who&rsquo;s move it is&hellip; anyway</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">isEven</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-124'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-124'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopped</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-125'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-125'>#</a>
      </div>
      <p>Grab record sheet so far&hellip;</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">try</span><span class="p">:</span>

                <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">recordingFile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
                <span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

                <span class="k">if</span> <span class="p">(((</span><span class="bp">self</span><span class="o">.</span><span class="n">getLengthOfPlay</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">isEven</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getLengthOfPlay</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)):</span>
                    <span class="n">mg</span> <span class="o">=</span> <span class="n">moveGeneration</span><span class="p">()</span>
                    <span class="n">moveToPlay</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span>
                        <span class="n">mg</span><span class="o">.</span><span class="n">GenMoves</span><span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">,</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">isEven</span><span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">getLengthOfPlay</span><span class="p">()</span> <span class="o">+</span>
                                <span class="mi">1</span><span class="p">)))</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;MOVE TO PLAY IS:&#39;</span><span class="p">,</span> <span class="n">moveToPlay</span><span class="p">)</span>
                    <span class="n">mg</span><span class="o">.</span><span class="n">writeMoveToBuffer</span><span class="p">(</span><span class="n">moveToPlay</span><span class="p">,</span> <span class="s2">&quot;ext_data/movetoplay.txt&quot;</span><span class="p">)</span>

                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Checking if a move is loaded by the AI&#39;</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="s2">&quot;ext_data/movetoplay.txt&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">st_size</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;There is a move! Let us load it&#39;</span><span class="p">)</span>
                        <span class="n">logic</span><span class="o">.</span><span class="n">PlayAIMove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;ext_data/load_game.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r+&#39;</span><span class="p">)</span>
                        <span class="n">f</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;ext_data/movetoplay.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r+&#39;</span><span class="p">)</span>
                        <span class="n">f</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

                <span class="k">if</span> <span class="p">(((</span><span class="bp">self</span><span class="o">.</span><span class="n">getLengthOfPlay</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="ow">or</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isEven</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getLengthOfPlay</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))):</span>
                    <span class="n">mg</span> <span class="o">=</span> <span class="n">moveGeneration</span><span class="p">()</span>
                    <span class="n">moveToPlay</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span>
                        <span class="n">mg</span><span class="o">.</span><span class="n">GenMoves</span><span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">gameState</span><span class="o">.</span><span class="n">gameMatrix</span><span class="p">,</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">isEven</span><span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">getLengthOfPlay</span><span class="p">()</span> <span class="o">+</span>
                                <span class="mi">1</span><span class="p">)))</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;MOVE TO PLAY IS:&#39;</span><span class="p">,</span> <span class="n">moveToPlay</span><span class="p">)</span>
                    <span class="n">mg</span><span class="o">.</span><span class="n">writeMoveToBuffer</span><span class="p">(</span><span class="n">moveToPlay</span><span class="p">,</span> <span class="s2">&quot;ext_data/movetoplay.txt&quot;</span><span class="p">)</span>

                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Checking if a move is loaded by the AI&#39;</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="s2">&quot;ext_data/movetoplay.txt&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">st_size</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;There is a move! Let us load it&#39;</span><span class="p">)</span>
                        <span class="n">logic</span><span class="o">.</span><span class="n">PlayAIMove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;ext_data/load_game.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r+&#39;</span><span class="p">)</span>
                        <span class="n">f</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;ext_data/movetoplay.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r+&#39;</span><span class="p">)</span>
                        <span class="n">f</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Game has not started yet or AI has not started making a move&#39;</span><span class="p">)</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
